{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/loadboard/react-video/src/components/Video.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/components/Video.js\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { insertVideo, listVideos, updateVideo, deleteVideo, uploadVideo } from \"../api/video\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Modal({\n  open,\n  title,\n  onClose,\n  children,\n  footer\n}) {\n  _s();\n  useEffect(() => {\n    if (!open) return;\n    const onKey = e => e.key === \"Escape\" && onClose();\n    document.addEventListener(\"keydown\", onKey);\n    return () => document.removeEventListener(\"keydown\", onKey);\n  }, [open, onClose]);\n  const overlay = {\n    position: \"fixed\",\n    inset: 0,\n    background: \"rgba(0,0,0,.45)\",\n    display: open ? \"grid\" : \"none\",\n    placeItems: \"center\",\n    zIndex: 2000\n  };\n  const card = {\n    width: \"min(92vw, 640px)\",\n    background: \"#fff\",\n    borderRadius: 14,\n    boxShadow: \"0 20px 50px rgba(0,0,0,.2)\",\n    overflow: \"hidden\"\n  };\n  const header = {\n    padding: \"12px 16px\",\n    borderBottom: \"1px solid #eee\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    fontWeight: 600\n  };\n  const body = {\n    padding: 16\n  };\n  const footerBox = {\n    padding: 16,\n    borderTop: \"1px solid #eee\",\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    gap: 8\n  };\n  const closeBtn = {\n    border: \"1px solid #e5e7eb\",\n    background: \"#fff\",\n    borderRadius: 8,\n    padding: \"6px 10px\",\n    cursor: \"pointer\"\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: overlay,\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: card,\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: header,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: closeBtn,\n          onClick: onClose,\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: body,\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this), footer && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: footerBox,\n        children: footer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 20\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }, this);\n}\n_s(Modal, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = Modal;\nexport default function Video() {\n  _s2();\n  // list/search\n  const [items, setItems] = useState([]);\n  const [q, setQ] = useState(\"\");\n\n  // insert (manual link) – keeping for parity with your old UI\n  const [videoName, setVideoName] = useState(\"\");\n  const [s3Link, setS3Link] = useState(\"\");\n\n  // edit modal\n  const [edit, setEdit] = useState(null);\n\n  // --- NEW: upload from browser ---\n  const [uploadName, setUploadName] = useState(\"\");\n  const [uploadFile, setUploadFile] = useState(null);\n  const [overwrite, setOverwrite] = useState(true);\n  const [pct, setPct] = useState(0);\n  const [uploading, setUploading] = useState(false);\n  const [uploadedInfo, setUploadedInfo] = useState(null); // { s3_link, key, bucket }\n  const fileInputRef = useRef(null);\n  useEffect(() => {\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const load = async () => {\n    const res = await listVideos({\n      q,\n      limit: 50,\n      offset: 0\n    });\n    setItems(res.data.items || []);\n  };\n  const add = async () => {\n    if (!videoName.trim() || !s3Link.trim()) return;\n    await insertVideo(videoName.trim(), s3Link.trim());\n    setVideoName(\"\");\n    setS3Link(\"\");\n    load();\n  };\n  const openEdit = it => {\n    setEdit({\n      video_name: it.video_name,\n      s3_link: it.s3_link,\n      newName: it.video_name,\n      newLink: it.s3_link\n    });\n  };\n  const save = async () => {\n    if (!edit) return;\n    const patch = {};\n    if (edit.newName && edit.newName !== edit.video_name) patch.video_name = edit.newName.trim();\n    if (edit.newLink && edit.newLink !== edit.s3_link) patch.s3_link = edit.newLink.trim();\n    if (!Object.keys(patch).length) return;\n    await updateVideo(edit.video_name, patch);\n    setEdit(null);\n    load();\n  };\n  const remove = async name => {\n    if (!window.confirm(`Delete video \"${name}\"?`)) return;\n    await deleteVideo(name);\n    load();\n  };\n\n  // --- Upload handler ---\n  const handleUpload = async () => {\n    if (!uploadName.trim()) {\n      alert(\"Please enter a video name\");\n      return;\n    }\n    if (!uploadFile) {\n      alert(\"Please select a file\");\n      return;\n    }\n    setUploadedInfo(null);\n    setPct(0);\n    setUploading(true);\n    try {\n      const res = await uploadVideo(uploadFile, uploadName.trim(), overwrite, progressPct => setPct(progressPct));\n      setUploadedInfo(res.data); // contains s3_link, key, bucket, etc.\n      // Refresh list to show new/updated row\n      load();\n      // Clear file input nicely\n      setUploadFile(null);\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\n    } catch (e) {\n      var _e$response, _e$response$data;\n      console.error(e);\n      alert((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.detail) || \"Upload failed\");\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // styles\n  const input = {\n    border: \"1px solid #e5e7eb\",\n    borderRadius: 8,\n    padding: \"8px 10px\",\n    fontSize: 14\n  };\n  const btn = {\n    padding: \"8px 12px\",\n    borderRadius: 8,\n    border: \"1px solid #e5e7eb\",\n    background: \"#fff\",\n    cursor: \"pointer\",\n    fontSize: 14,\n    fontWeight: 600\n  };\n  const btnPrimary = {\n    ...btn,\n    background: \"#4f46e5\",\n    color: \"#fff\",\n    borderColor: \"#4f46e5\"\n  };\n  const btnDanger = {\n    ...btn,\n    background: \"#dc2626\",\n    color: \"#fff\",\n    borderColor: \"#dc2626\"\n  };\n  const row = {\n    display: \"grid\",\n    gridTemplateColumns: \"1fr auto auto\",\n    gap: 8,\n    alignItems: \"center\",\n    padding: \"8px 0\",\n    borderBottom: \"1px dashed #eee\"\n  };\n  const barWrap = {\n    width: \"100%\",\n    height: 10,\n    background: \"#eef2ff\",\n    borderRadius: 9999,\n    overflow: \"hidden\"\n  };\n  const bar = {\n    height: \"100%\",\n    width: `${pct}%`,\n    background: \"#4f46e5\",\n    transition: \"width .2s\"\n  };\n  const filtered = items.filter(it => !q || it.video_name.toLowerCase().includes(q.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        fontSize: 28,\n        margin: \"0 0 12px\"\n      },\n      children: \"Videos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \"1px solid #e5e7eb\",\n        borderRadius: 12,\n        padding: 16,\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginTop: 0,\n          marginBottom: 10\n        },\n        children: \"Upload a Video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"grid\",\n          gridTemplateColumns: \"1fr 1fr auto\",\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          style: input,\n          placeholder: \"video_name (saved as video_name.mp4)\",\n          value: uploadName,\n          onChange: e => setUploadName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: fileInputRef,\n          style: input,\n          type: \"file\",\n          accept: \"video/mp4,video/*\",\n          onChange: e => {\n            var _e$target$files;\n            return setUploadFile(((_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0]) || null);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: btnPrimary,\n          disabled: uploading,\n          onClick: handleUpload,\n          children: uploading ? \"Uploading...\" : \"Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: 10,\n          marginTop: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            gap: 6,\n            fontSize: 14\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: overwrite,\n            onChange: e => setOverwrite(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), \"Overwrite if exists\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), uploading && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: barWrap,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: bar\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 36\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 12,\n              color: \"#6b7280\",\n              marginTop: 4\n            },\n            children: [pct, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), uploadedInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 10,\n          fontSize: 14\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Bucket:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 18\n          }, this), \" \", uploadedInfo.bucket]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            wordBreak: \"break-all\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Key:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 15\n          }, this), \" \", uploadedInfo.key]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            wordBreak: \"break-all\",\n            color: \"#2563eb\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"S3 URI:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 15\n          }, this), \" \", uploadedInfo.s3_link]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        gap: 8,\n        marginBottom: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        style: {\n          ...input,\n          minWidth: 220\n        },\n        placeholder: \"search (q)\",\n        value: q,\n        onChange: e => setQ(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: btn,\n        onClick: load,\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \"1px solid #eee\",\n        borderRadius: 12,\n        padding: \"4px 12px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...row,\n          fontWeight: 700,\n          borderBottom: \"1px solid #eee\",\n          paddingTop: 10,\n          paddingBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Video (ID) \\u2014 Link\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), filtered.map(it => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: row,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: 600\n            },\n            children: it.video_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"#6b7280\",\n              marginLeft: 8\n            },\n            children: [\"(id: \", it.id, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#2563eb\",\n              fontSize: 12,\n              marginTop: 4,\n              wordBreak: \"break-all\"\n            },\n            children: it.s3_link\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            style: btn,\n            onClick: () => openEdit(it),\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            style: btnDanger,\n            onClick: () => remove(it.video_name),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this)]\n      }, it.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: !!edit,\n      title: \"Update Video\",\n      onClose: () => setEdit(null),\n      footer: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          style: btn,\n          onClick: () => setEdit(null),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: btnPrimary,\n          onClick: save,\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true),\n      children: edit && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"grid\",\n          gap: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontSize: 12,\n            color: \"#6b7280\"\n          },\n          children: \"Current name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            ...input\n          },\n          value: edit.video_name,\n          disabled: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontSize: 12,\n            color: \"#6b7280\",\n            marginTop: 6\n          },\n          children: \"Rename to\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          autoFocus: true,\n          style: {\n            ...input\n          },\n          value: edit.newName,\n          onChange: e => setEdit(x => ({\n            ...x,\n            newName: e.target.value\n          })),\n          placeholder: \"e.g. nazmabad_video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            fontSize: 12,\n            color: \"#6b7280\",\n            marginTop: 6\n          },\n          children: \"New s3_link\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            ...input\n          },\n          value: edit.newLink,\n          onChange: e => setEdit(x => ({\n            ...x,\n            newLink: e.target.value\n          })),\n          placeholder: \"s3://bucket/key.mp4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n}\n_s2(Video, \"wHdt09dtVzfVFvGT2PCFAgBpTUo=\");\n_c2 = Video;\nvar _c, _c2;\n$RefreshReg$(_c, \"Modal\");\n$RefreshReg$(_c2, \"Video\");","map":{"version":3,"names":["React","useEffect","useState","useRef","insertVideo","listVideos","updateVideo","deleteVideo","uploadVideo","jsxDEV","_jsxDEV","Fragment","_Fragment","Modal","open","title","onClose","children","footer","_s","onKey","e","key","document","addEventListener","removeEventListener","overlay","position","inset","background","display","placeItems","zIndex","card","width","borderRadius","boxShadow","overflow","header","padding","borderBottom","alignItems","justifyContent","fontWeight","body","footerBox","borderTop","gap","closeBtn","border","cursor","style","onClick","stopPropagation","fileName","_jsxFileName","lineNumber","columnNumber","_c","Video","_s2","items","setItems","q","setQ","videoName","setVideoName","s3Link","setS3Link","edit","setEdit","uploadName","setUploadName","uploadFile","setUploadFile","overwrite","setOverwrite","pct","setPct","uploading","setUploading","uploadedInfo","setUploadedInfo","fileInputRef","load","res","limit","offset","data","add","trim","openEdit","it","video_name","s3_link","newName","newLink","save","patch","Object","keys","length","remove","name","window","confirm","handleUpload","alert","progressPct","current","value","_e$response","_e$response$data","console","error","response","detail","input","fontSize","btn","btnPrimary","color","borderColor","btnDanger","row","gridTemplateColumns","barWrap","height","bar","transition","filtered","filter","toLowerCase","includes","margin","marginBottom","marginTop","placeholder","onChange","target","ref","type","accept","_e$target$files","files","disabled","checked","flex","bucket","wordBreak","minWidth","paddingTop","paddingBottom","map","marginLeft","id","autoFocus","x","_c2","$RefreshReg$"],"sources":["/home/ubuntu/loadboard/react-video/src/components/Video.js"],"sourcesContent":["// src/components/Video.js\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { insertVideo, listVideos, updateVideo, deleteVideo, uploadVideo } from \"../api/video\";\n\nfunction Modal({ open, title, onClose, children, footer }) {\n  useEffect(() => {\n    if (!open) return;\n    const onKey = (e) => e.key === \"Escape\" && onClose();\n    document.addEventListener(\"keydown\", onKey);\n    return () => document.removeEventListener(\"keydown\", onKey);\n  }, [open, onClose]);\n\n  const overlay = { position: \"fixed\", inset: 0, background: \"rgba(0,0,0,.45)\", display: open ? \"grid\" : \"none\", placeItems: \"center\", zIndex: 2000 };\n  const card = { width: \"min(92vw, 640px)\", background: \"#fff\", borderRadius: 14, boxShadow: \"0 20px 50px rgba(0,0,0,.2)\", overflow: \"hidden\" };\n  const header = { padding: \"12px 16px\", borderBottom: \"1px solid #eee\", display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", fontWeight: 600 };\n  const body = { padding: 16 };\n  const footerBox = { padding: 16, borderTop: \"1px solid #eee\", display: \"flex\", justifyContent: \"flex-end\", gap: 8 };\n  const closeBtn = { border: \"1px solid #e5e7eb\", background: \"#fff\", borderRadius: 8, padding: \"6px 10px\", cursor: \"pointer\" };\n\n  return (\n    <div style={overlay} onClick={onClose}>\n      <div style={card} onClick={(e) => e.stopPropagation()}>\n        <div style={header}>\n          <span>{title}</span>\n          <button style={closeBtn} onClick={onClose}>✕</button>\n        </div>\n        <div style={body}>{children}</div>\n        {footer && <div style={footerBox}>{footer}</div>}\n      </div>\n    </div>\n  );\n}\n\nexport default function Video() {\n  // list/search\n  const [items, setItems] = useState([]);\n  const [q, setQ] = useState(\"\");\n\n  // insert (manual link) – keeping for parity with your old UI\n  const [videoName, setVideoName] = useState(\"\");\n  const [s3Link, setS3Link] = useState(\"\");\n\n  // edit modal\n  const [edit, setEdit] = useState(null);\n\n  // --- NEW: upload from browser ---\n  const [uploadName, setUploadName] = useState(\"\");\n  const [uploadFile, setUploadFile] = useState(null);\n  const [overwrite, setOverwrite] = useState(true);\n  const [pct, setPct] = useState(0);\n  const [uploading, setUploading] = useState(false);\n  const [uploadedInfo, setUploadedInfo] = useState(null); // { s3_link, key, bucket }\n  const fileInputRef = useRef(null);\n\n  useEffect(() => {\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const load = async () => {\n    const res = await listVideos({ q, limit: 50, offset: 0 });\n    setItems(res.data.items || []);\n  };\n\n  const add = async () => {\n    if (!videoName.trim() || !s3Link.trim()) return;\n    await insertVideo(videoName.trim(), s3Link.trim());\n    setVideoName(\"\");\n    setS3Link(\"\");\n    load();\n  };\n\n  const openEdit = (it) => {\n    setEdit({ video_name: it.video_name, s3_link: it.s3_link, newName: it.video_name, newLink: it.s3_link });\n  };\n\n  const save = async () => {\n    if (!edit) return;\n    const patch = {};\n    if (edit.newName && edit.newName !== edit.video_name) patch.video_name = edit.newName.trim();\n    if (edit.newLink && edit.newLink !== edit.s3_link) patch.s3_link = edit.newLink.trim();\n    if (!Object.keys(patch).length) return;\n    await updateVideo(edit.video_name, patch);\n    setEdit(null);\n    load();\n  };\n\n  const remove = async (name) => {\n    if (!window.confirm(`Delete video \"${name}\"?`)) return;\n    await deleteVideo(name);\n    load();\n  };\n\n  // --- Upload handler ---\n  const handleUpload = async () => {\n    if (!uploadName.trim()) {\n      alert(\"Please enter a video name\");\n      return;\n    }\n    if (!uploadFile) {\n      alert(\"Please select a file\");\n      return;\n    }\n    setUploadedInfo(null);\n    setPct(0);\n    setUploading(true);\n    try {\n      const res = await uploadVideo(\n        uploadFile,\n        uploadName.trim(),\n        overwrite,\n        (progressPct) => setPct(progressPct)\n      );\n      setUploadedInfo(res.data); // contains s3_link, key, bucket, etc.\n      // Refresh list to show new/updated row\n      load();\n      // Clear file input nicely\n      setUploadFile(null);\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\n    } catch (e) {\n      console.error(e);\n      alert(e?.response?.data?.detail || \"Upload failed\");\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  // styles\n  const input = { border: \"1px solid #e5e7eb\", borderRadius: 8, padding: \"8px 10px\", fontSize: 14 };\n  const btn = { padding: \"8px 12px\", borderRadius: 8, border: \"1px solid #e5e7eb\", background: \"#fff\", cursor: \"pointer\", fontSize: 14, fontWeight: 600 };\n  const btnPrimary = { ...btn, background: \"#4f46e5\", color: \"#fff\", borderColor: \"#4f46e5\" };\n  const btnDanger = { ...btn, background: \"#dc2626\", color: \"#fff\", borderColor: \"#dc2626\" };\n  const row = { display: \"grid\", gridTemplateColumns: \"1fr auto auto\", gap: 8, alignItems: \"center\", padding: \"8px 0\", borderBottom: \"1px dashed #eee\" };\n  const barWrap = { width: \"100%\", height: 10, background: \"#eef2ff\", borderRadius: 9999, overflow: \"hidden\" };\n  const bar = { height: \"100%\", width: `${pct}%`, background: \"#4f46e5\", transition: \"width .2s\" };\n\n  const filtered = items.filter((it) => !q || it.video_name.toLowerCase().includes(q.toLowerCase()));\n\n  return (\n    <div>\n      <h2 style={{ fontSize: 28, margin: \"0 0 12px\" }}>Videos</h2>\n\n      {/* ===== NEW: Upload from browser ===== */}\n      <div style={{ border: \"1px solid #e5e7eb\", borderRadius: 12, padding: 16, marginBottom: 16 }}>\n        <h3 style={{ marginTop: 0, marginBottom: 10 }}>Upload a Video</h3>\n        <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr auto\", gap: 8 }}>\n          <input\n            style={input}\n            placeholder=\"video_name (saved as video_name.mp4)\"\n            value={uploadName}\n            onChange={(e) => setUploadName(e.target.value)}\n          />\n          <input\n            ref={fileInputRef}\n            style={input}\n            type=\"file\"\n            accept=\"video/mp4,video/*\"\n            onChange={(e) => setUploadFile(e.target.files?.[0] || null)}\n          />\n          <button style={btnPrimary} disabled={uploading} onClick={handleUpload}>\n            {uploading ? \"Uploading...\" : \"Upload\"}\n          </button>\n        </div>\n\n        <div style={{ display: \"flex\", alignItems: \"center\", gap: 10, marginTop: 10 }}>\n          <label style={{ display: \"flex\", alignItems: \"center\", gap: 6, fontSize: 14 }}>\n            <input type=\"checkbox\" checked={overwrite} onChange={(e) => setOverwrite(e.target.checked)} />\n            Overwrite if exists\n          </label>\n          {uploading && (\n            <div style={{ flex: 1 }}>\n              <div style={barWrap}><div style={bar} /></div>\n              <div style={{ fontSize: 12, color: \"#6b7280\", marginTop: 4 }}>{pct}%</div>\n            </div>\n          )}\n        </div>\n\n        {uploadedInfo && (\n          <div style={{ marginTop: 10, fontSize: 14 }}>\n            <div><strong>Bucket:</strong> {uploadedInfo.bucket}</div>\n            <div style={{ wordBreak: \"break-all\" }}>\n              <strong>Key:</strong> {uploadedInfo.key}\n            </div>\n            <div style={{ wordBreak: \"break-all\", color: \"#2563eb\" }}>\n              <strong>S3 URI:</strong> {uploadedInfo.s3_link}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* ===== Search ===== */}\n      <div style={{ display: \"flex\", gap: 8, marginBottom: 10 }}>\n        <input style={{ ...input, minWidth: 220 }} placeholder=\"search (q)\" value={q} onChange={(e) => setQ(e.target.value)} />\n        <button style={btn} onClick={load}>Search</button>\n      </div>\n\n\n      {/* ===== List ===== */}\n      <div style={{ border: \"1px solid #eee\", borderRadius: 12, padding: \"4px 12px\" }}>\n        <div style={{ ...row, fontWeight: 700, borderBottom: \"1px solid #eee\", paddingTop: 10, paddingBottom: 10 }}>\n          <div>Video (ID) — Link</div>\n          <div>Update</div>\n          <div>Delete</div>\n        </div>\n\n        {filtered.map((it) => (\n          <div key={it.id} style={row}>\n            <div>\n              <span style={{ fontWeight: 600 }}>{it.video_name}</span>\n              <span style={{ color: \"#6b7280\", marginLeft: 8 }}>(id: {it.id})</span>\n              <div style={{ color: \"#2563eb\", fontSize: 12, marginTop: 4, wordBreak: \"break-all\" }}>{it.s3_link}</div>\n            </div>\n            <div><button style={btn} onClick={() => openEdit(it)}>Update</button></div>\n            <div><button style={btnDanger} onClick={() => remove(it.video_name)}>Delete</button></div>\n          </div>\n        ))}\n      </div>\n\n      {/* ===== Edit modal ===== */}\n      <Modal\n        open={!!edit}\n        title=\"Update Video\"\n        onClose={() => setEdit(null)}\n        footer={\n          <>\n            <button style={btn} onClick={() => setEdit(null)}>Cancel</button>\n            <button style={btnPrimary} onClick={save}>Save</button>\n          </>\n        }\n      >\n        {edit && (\n          <div style={{ display: \"grid\", gap: 10 }}>\n            <label style={{ fontSize: 12, color: \"#6b7280\" }}>Current name</label>\n            <input style={{ ...input }} value={edit.video_name} disabled />\n\n            <label style={{ fontSize: 12, color: \"#6b7280\", marginTop: 6 }}>Rename to</label>\n            <input\n              autoFocus\n              style={{ ...input }}\n              value={edit.newName}\n              onChange={(e) => setEdit((x) => ({ ...x, newName: e.target.value }))}\n              placeholder=\"e.g. nazmabad_video\"\n            />\n\n            <label style={{ fontSize: 12, color: \"#6b7280\", marginTop: 6 }}>New s3_link</label>\n            <input\n              style={{ ...input }}\n              value={edit.newLink}\n              onChange={(e) => setEdit((x) => ({ ...x, newLink: e.target.value }))}\n              placeholder=\"s3://bucket/key.mp4\"\n            />\n          </div>\n        )}\n      </Modal>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}