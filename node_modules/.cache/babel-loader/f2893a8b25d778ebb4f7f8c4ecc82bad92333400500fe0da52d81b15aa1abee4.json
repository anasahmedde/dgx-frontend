{"ast":null,"code":"// src/api/group.js\nimport axios from \"axios\";\n\n// Group API runs on port 8001\nconst BASE_URL = process.env.REACT_APP_GROUP_API_URL || `${window.location.protocol}//${window.location.hostname}:8001`;\nconst api = axios.create({\n  baseURL: BASE_URL,\n  timeout: 30000,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\nfunction normalizeList(payload) {\n  var _ref, _data$total;\n  const data = payload !== null && payload !== void 0 ? payload : {};\n  const items = Array.isArray(data) ? data : data.items || data.data || data.results || [];\n  const total = (_ref = (_data$total = data.total) !== null && _data$total !== void 0 ? _data$total : data.count) !== null && _ref !== void 0 ? _ref : items.length;\n  return {\n    items,\n    total\n  };\n}\nfunction toPosInt(v, fallback) {\n  const n = Number(v);\n  if (!Number.isFinite(n)) return fallback;\n  const i = Math.floor(n);\n  return i > 0 ? i : fallback;\n}\nfunction toNonNegInt(v, fallback) {\n  const n = Number(v);\n  if (!Number.isFinite(n)) return fallback;\n  const i = Math.floor(n);\n  return i >= 0 ? i : fallback;\n}\nexport async function listGroups(limit = 100, offset = 0) {\n  try {\n    const safeLimit = toPosInt(limit, 100);\n    const safeOffset = toNonNegInt(offset, 0);\n    const res = await api.get(\"/groups\", {\n      params: {\n        limit: safeLimit,\n        offset: safeOffset\n      }\n    });\n    const {\n      items,\n      total\n    } = normalizeList(res.data);\n    return {\n      ok: true,\n      items,\n      total\n    };\n  } catch (err) {\n    console.error(\"listGroups error:\", err);\n    return {\n      ok: false,\n      items: [],\n      total: 0,\n      error: err.message\n    };\n  }\n}\n\n// Returns array of group names (for dropdowns)\nexport async function listGroupNames(limit = 100, offset = 0) {\n  try {\n    const res = await listGroups(limit, offset);\n    return (res.items || []).map(g => g.gname || g.name || g).filter(Boolean);\n  } catch (err) {\n    console.error(\"listGroupNames error:\", err);\n    return [];\n  }\n}\n\n// INSERT - Create new group\nexport async function insertGroup(groupData) {\n  try {\n    const res = await api.post(\"/groups\", groupData);\n    return {\n      ok: true,\n      data: res.data\n    };\n  } catch (err) {\n    var _err$response, _err$response$data;\n    console.error(\"insertGroup error:\", err);\n    return {\n      ok: false,\n      error: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || err.message\n    };\n  }\n}\n\n// UPDATE - Update existing group\nexport async function updateGroup(groupId, groupData) {\n  try {\n    const res = await api.put(`/groups/${groupId}`, groupData);\n    return {\n      ok: true,\n      data: res.data\n    };\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    console.error(\"updateGroup error:\", err);\n    return {\n      ok: false,\n      error: ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.detail) || err.message\n    };\n  }\n}\n\n// DELETE - Delete group\nexport async function deleteGroup(groupId) {\n  try {\n    const res = await api.delete(`/groups/${groupId}`);\n    return {\n      ok: true,\n      data: res.data\n    };\n  } catch (err) {\n    var _err$response3, _err$response3$data;\n    console.error(\"deleteGroup error:\", err);\n    return {\n      ok: false,\n      error: ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.detail) || err.message\n    };\n  }\n}","map":{"version":3,"names":["axios","BASE_URL","process","env","REACT_APP_GROUP_API_URL","window","location","protocol","hostname","api","create","baseURL","timeout","headers","normalizeList","payload","_ref","_data$total","data","items","Array","isArray","results","total","count","length","toPosInt","v","fallback","n","Number","isFinite","i","Math","floor","toNonNegInt","listGroups","limit","offset","safeLimit","safeOffset","res","get","params","ok","err","console","error","message","listGroupNames","map","g","gname","name","filter","Boolean","insertGroup","groupData","post","_err$response","_err$response$data","response","detail","updateGroup","groupId","put","_err$response2","_err$response2$data","deleteGroup","delete","_err$response3","_err$response3$data"],"sources":["/home/ubuntu/loadboard/react-video/src/api/group.js"],"sourcesContent":["// src/api/group.js\nimport axios from \"axios\";\n\n// Group API runs on port 8001\nconst BASE_URL =\n  process.env.REACT_APP_GROUP_API_URL ||\n  `${window.location.protocol}//${window.location.hostname}:8001`;\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n  timeout: 30000,\n  headers: { \"Content-Type\": \"application/json\" },\n});\n\nfunction normalizeList(payload) {\n  const data = payload ?? {};\n  const items = Array.isArray(data) ? data : data.items || data.data || data.results || [];\n  const total = data.total ?? data.count ?? items.length;\n  return { items, total };\n}\n\nfunction toPosInt(v, fallback) {\n  const n = Number(v);\n  if (!Number.isFinite(n)) return fallback;\n  const i = Math.floor(n);\n  return i > 0 ? i : fallback;\n}\n\nfunction toNonNegInt(v, fallback) {\n  const n = Number(v);\n  if (!Number.isFinite(n)) return fallback;\n  const i = Math.floor(n);\n  return i >= 0 ? i : fallback;\n}\n\nexport async function listGroups(limit = 100, offset = 0) {\n  try {\n    const safeLimit = toPosInt(limit, 100);\n    const safeOffset = toNonNegInt(offset, 0);\n\n    const res = await api.get(\"/groups\", { params: { limit: safeLimit, offset: safeOffset } });\n    const { items, total } = normalizeList(res.data);\n    return { ok: true, items, total };\n  } catch (err) {\n    console.error(\"listGroups error:\", err);\n    return { ok: false, items: [], total: 0, error: err.message };\n  }\n}\n\n// Returns array of group names (for dropdowns)\nexport async function listGroupNames(limit = 100, offset = 0) {\n  try {\n    const res = await listGroups(limit, offset);\n    return (res.items || []).map((g) => g.gname || g.name || g).filter(Boolean);\n  } catch (err) {\n    console.error(\"listGroupNames error:\", err);\n    return [];\n  }\n}\n\n// INSERT - Create new group\nexport async function insertGroup(groupData) {\n  try {\n    const res = await api.post(\"/groups\", groupData);\n    return { ok: true, data: res.data };\n  } catch (err) {\n    console.error(\"insertGroup error:\", err);\n    return { ok: false, error: err.response?.data?.detail || err.message };\n  }\n}\n\n// UPDATE - Update existing group\nexport async function updateGroup(groupId, groupData) {\n  try {\n    const res = await api.put(`/groups/${groupId}`, groupData);\n    return { ok: true, data: res.data };\n  } catch (err) {\n    console.error(\"updateGroup error:\", err);\n    return { ok: false, error: err.response?.data?.detail || err.message };\n  }\n}\n\n// DELETE - Delete group\nexport async function deleteGroup(groupId) {\n  try {\n    const res = await api.delete(`/groups/${groupId}`);\n    return { ok: true, data: res.data };\n  } catch (err) {\n    console.error(\"deleteGroup error:\", err);\n    return { ok: false, error: err.response?.data?.detail || err.message };\n  }\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}